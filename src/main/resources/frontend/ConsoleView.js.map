{"version":3,"file":"ConsoleView.js","sources":["../../../../frontend/src/services/scriptService.ts","../../../../frontend/src/views/ConsoleView.vue"],"sourcesContent":["import axios from 'axios';\nimport { ScriptResult } from \"@/interfaces/script.ts\";\n\nconst client = axios.create({\n  baseURL: '/rest/plugin/ru.slie.luna.plugins.gravity',\n})\n\nclass ScriptService {\n  async runScript(scriptContent: string) {\n    return client.post<ScriptResult>('/gravity/scripts/execute', {scriptContent});\n  }\n}\n\nexport const scriptService = new ScriptService();","<script setup lang=\"ts\">\nimport CodeEditor from \"@/components/CodeEditor.vue\";\nimport { ref } from \"vue\";\nimport { ButtonBusy } from \"luna\";\nimport { ScriptResult } from \"@/interfaces/script.ts\";\nimport { scriptService } from \"@/services/scriptService.ts\";\n\nconst value = ref<string>(null)\nconst busy = ref(false);\nconst result = ref<ScriptResult>(null);\n\nconst runScript = () => {\n  if (!value.value) {\n    return;\n  }\n\n  busy.value = true;\n  scriptService.runScript(value.value).then((data) => {\n    result.value = data.data\n  }).catch((e) => {\n    console.log(e);\n  }).finally(() => {\n    busy.value = false;\n  })\n}\n\n</script>\n\n<template>\n  <div class=\"demo-page pad\">\n    <h3>Demo page</h3>\n    <CodeEditor v-model=\"value\"></CodeEditor>\n\n    <ButtonBusy :busy=\"busy\" :disabled=\"busy\" @click=\"runScript\">Выполнить</ButtonBusy>\n    <span v-if=\"result\">{{ result.result }}</span>\n  </div>\n</template>\n\n<style>\n\n</style>\n"],"names":["CodeEditor"],"mappings":";AAAA,MAAA,QAAA,OAAA,OAAA;AAGA,MAAM,SAAS,MAAM,OAAO;AAAA,EAC1B,SAAS;AACX,CAAC;AAED,MAAM,cAAc;AAAA,EAClB,MAAM,UAAU,eAAuB;AACrC,WAAO,OAAO,KAAmB,4BAA4B,EAAC,eAAc;AAAA,EAC9E;AACF;AAEO,MAAM,gBAAgB,IAAI,cAAA;;;;;;;;;;;;;ACXjC,MAAA,MAAA,OAAA,KAAA,EAAA;AACA,MAAA,aAAA,OAAA,qBAAA,EAAA;;;;AAIA,UAAM,QAAQ,IAAY,IAAI;AAC9B,UAAM,OAAO,IAAI,KAAK;AACtB,UAAM,SAAS,IAAkB,IAAI;AAErC,UAAM,YAAY,MAAM;AACtB,UAAI,CAAC,MAAM,OAAO;AAChB;AAAA,MACF;AAEA,WAAK,QAAQ;AACb,oBAAc,UAAU,MAAM,KAAK,EAAE,KAAK,CAAC,SAAS;AAClD,eAAO,QAAQ,KAAK;AAAA,MACtB,CAAC,EAAE,MAAM,CAAC,MAAM;AACd,gBAAQ,IAAI,CAAC;AAAA,MACf,CAAC,EAAE,QAAQ,MAAM;AACf,aAAK,QAAQ;AAAA,MACf,CAAC;AAAA,IACH;;AAKE,aAAA,WAAA,GAAA,oBAMM,OANN,YAMM;AAAA,QALJ,OAAA,CAAA,MAAA,OAAA,CAAA,IAAA,oBAAkB,YAAd,aAAS,EAAA;AAAA,QACb,aAAyCA,aAAA;AAAA,sBAApB,MAAA;AAAA,uEAAA,MAAK,QAAA;AAAA,QAAA;QAE1B,aAAmF,OAAA,UAAA,GAAA;AAAA,UAAtE,MAAM,KAAA;AAAA,UAAO,UAAU,KAAA;AAAA,UAAO,SAAO;AAAA,QAAA;4BAAW,MAAS,CAAA,GAAA,OAAA,CAAA,MAAA,OAAA,CAAA,IAAA;AAAA,6BAAT,aAAS,EAAA;AAAA,UAAA;;;QAC1D,OAAA,uBAAZ,oBAA8C,QAAA,YAAA,iBAAvB,OAAA,MAAO,MAAM,GAAA,CAAA;;;;;"}